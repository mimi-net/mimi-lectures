== Сопоставление MAC адреса по IP адресу

Сделаем небольшую сеть, как показано на рисунке, из 2-х хостов и 1 свитча. И назначим IP адреса:

* хост 1 - 10.0.0.1
* хост 2 - 10.0.0.2

.2 хоста.
image::{docdir}/images/2_hosts.png[2 хоста.]

Для отправки IP пакета воспользуемся утилитой ping. Эта утилита отправляет на указанный IP адрес специальный ICMP запрос, получив который хост должен отправить ICMP ответ. Если мы попробуем отправить пакет от хоста 1 на хост 2, то у хоста 1 возникнут проблемы с MAC адресом получателя.

.Какой MAC адрес получателя?
image::{docdir}/images/mac_unknown.png[Какой MAC адрес получателя?]

На сетевом уровне протоколом IP будет установлен:

* IP адрес отправителя (это наш IP адрес, мы его знаем)
* IP адрес получателя, его мы указали аргументом для команды ping - это 10.0.0.2.

Далее пакет спускается на канальный уровень, где необходимо заполнить MAC адреса:

* MAC адрес отправителя мы знаем - это наш MAC
* А вот какой ставить MAC адрес получателя?

Мы не можем оставить это поле пустым, иначе, как хост поймет, что на канальном уровне пакет пришел для него, а не для кого-то другого.

Необходимо решить задачу сопоставления MAC адреса по IP адресу. Для этого используется ARP протокол.